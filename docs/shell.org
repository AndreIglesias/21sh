#+TITLE: minishell
#+AUTHOR: ciglesia & jiglesia
#+EMAIL: ciglesia@student.42.fr & jiglesia@student.42.fr
#+OPTIONS: toc:nil

* TODOS
https://orgmode.org/manual/Checkboxes.html
** TODO [#A] FAQs [50%]
- [X] what Display Environment?
  * *Termcap* that takes as _param_ a player number to qualify it as /alive/
- [ ] what is an argumen't coding byte?
  * The [[ACB]] allows the VM to know how to *load* the arguments of an instruction

** TODO [#B] DEV [0%]
- [ ] Environment [0%]
  - [ ] Input capture
  - [ ] Keyboard capture
  - [ ] Signal Reciever
- [ ] Analysis [0%]
  - [ ] Lexer
  - [ ] Tokens
  - [ ] Parser
  - [ ] Abstract Syntax Tree (AST)
  - [ ] Semantic Analyzer
  - [ ] Annotated AST
- [ ] Evaluator [0%]
  - [ ] Process AST to yield a result
- [ ] Environment [0%]
  - [ ] To keep track of the values of variables
* REFERENCE
** ALLOWED FUNCTIONS

|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| *lib*      | *function*                          | *description*                                       |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| stdio      | printf                              | formated output conversion                          |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| stdlib     | malloc                              | Allocate dynamic memory                             |                                             |                                                                                            |
|            | free                                | Free dynamic memory                                 |                                             |                                                                                            |
|            | exit                                | Causes normal process termination                   |                                             |                                                                                            |
|            |                                     |                                                     |                                             |                                                                                            |
|            | getenv                              | Get an environment variable                         | char *getenv(const char *name);             | returns a pointer to the value in the  environment,                                        |
|            |                                     |                                                     |                                             | or NULL if there is no match                                                               |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| unistd     | write                               | Write to fd                                         |                                             |                                                                                            |
|            | read                                | Read from fd                                        |                                             |                                                                                            |
|            | close                               | Close a fd                                          |                                             |                                                                                            |
|            | fork (sys/types)                    | Create a child process                              | pid_t fork(void);                           | the PID of the child process is returned in the parent,                                    |
|            |                                     |                                                     |                                             | 0 is returned in the child.  On failure, -1 is returned in the  parent.                    |
|            |                                     |                                                     |                                             |                                                                                            |
|            | getcwd                              | Get current working directory                       | char *getcwd(char *buf, size_t size);       | return  a null-terminated string containing an absolute                                    |
|            |                                     |                                                     |                                             | pathname that is the current working directory of  the  calling  process = buf             |
|            |                                     |                                                     |                                             |                                                                                            |
|            | chdir                               | Change working directory                            | int chdir(const char *path);                | On success, zero is returned.  On error, -1 is returned                                    |
|            | execve                              | Execute program                                     | int execve(const char *pathname,            | On  success does not return, on error -1 is returned                                       |
|            |                                     |                                                     | .  char *const argv[], char *const envp[]); |                                                                                            |
|            |                                     |                                                     |                                             |                                                                                            |
|            | dup                                 | Duplicate a fd to a random newfd                    | int dup(int oldfd);                         | return the new file descriptor.  On error, -1 is returned                                  |
|            | dup2                                | *Same as above* uses the newfd given                | int dup2(int oldfd, int newfd);             | *same as above*                                                                            |
|            | pipe                                | Create pipe  [0] = read(child), [1] = write(parent) | int pipe(int pipefd[2]);                    | On success, zero is returned.  On error, -1 is returned                                    |
|            |                                     |                                                     |                                             |                                                                                            |
|            | isatty                              | Test whether a fd refers to a terminal              | int isatty(int fd);                         | returns 1 if fd is an open file descriptor referring to a terminal otherwise 0 is returned |
|            | ttyname                             | Return name of a terminal                           | char *ttyname(int fd);                      | returns a pointer to a pathname  on  success. on error NULL.                               |
|            | ttyslot                             | Find slot of current user's term in a file          | int ttyslot(void);                          | returns the slot number.  On error it returns 0 on UNIX but -1 on System V-like systems.   |
|            |                                     |                                                     |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| *fcntl*    | open                                | Open and possibly create a file                     |                                             |                                                                                            |
| sys/types  |                                     |                                                     |                                             |                                                                                            |
| sys/stat   |                                     |                                                     |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| *sys/wait* | wait                                | Wait for process to change state                    | pid_t wait(int *wstatus);                   | on success, returns the process ID of the  terminated  child;  on error, -1 is returned.   |
| sys/types  | waitpid                             | *Same as above*                                     | pid_t waitpid(pid_t pid,                    | on  success,  returns the process ID of the child whose state has changed; if WNOHANG was  |
|            |                                     |                                                     | .            int *wstatus, int options);    | specified but have not yet changed state, then 0 is returned. On error, -1 is returned.    |
|            |                                     |                                                     |                                             |                                                                                            |
|            | wait3 (sys/resource & *time*)       | *Same as above*, BSD style waits of any child       | pid_t wait3(int *wstatus, int options,      | same as waitpid + rusage                                                                   |
|            |                                     |                                                     | .          struct rusage *rusage);          |                                                                                            |
|            | wait4 (sys/resource & *time*)       | *Same as above*, BSD style select a specific child  | pid_t wait4(pid_t pid, int *wstatus,        | *same as above*                                                                            |
|            |                                     |                                                     | .      int options, struct rusage *rusage); |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| signal     | signal                              | ANSI C signal handling                              |                                             |                                                                                            |
|            | kill (sys/types)                    | Send signal to a process                            |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| *sys/stat* | stat                                | Get file status                                     |                                             |                                                                                            |
| unistd     | lstat                               | *Same as above*                                     |                                             |                                                                                            |
| sys/types  | fstat                               | *Same as above*                                     |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| dirent     | opendir (sys/types)                 | Open a directory                                    |                                             |                                                                                            |
|            | readdir                             | Read a directory                                    |                                             |                                                                                            |
|            | closedir (sys/types)                | Close a directory                                   |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| string     | strerror                            | Return string describing error number               |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| errno      | errno                               | Number of last error                                |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| sys/ioctl  | ioctl                               | Control device                                      |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| *terminos* | tcsetattr                           | Set params associated with the terminal from        |                                             |                                                                                            |
|            |                                     | the terminos structure *terminos_p*                 |                                             |                                                                                            |
|            |                                     |                                                     |                                             |                                                                                            |
| unistd     | tcgetattr                           | Get params associated with the object               |                                             |                                                                                            |
|            |                                     | referred by fd and stores them in the terminos      |                                             |                                                                                            |
|            |                                     | structure *terminos_p*                              |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|
| curses     | tgetent (loads entry for name)      | Direct *curses* interface to the terminfo           |                                             |                                                                                            |
| term       | tgetflag (get boolean entry for id) | capability database                                 |                                             |                                                                                            |
| ~termcap   | tgetnum (get num entry for id)      |                                                     |                                             |                                                                                            |
|            | tgetstr (get string entry for id)   |                                                     |                                             |                                                                                            |
|            |                                     |                                                     |                                             |                                                                                            |
|            | tgoto                               | Instantiates the params into the given capability   |                                             |                                                                                            |
|            |                                     | The output is passed to tputs                       |                                             |                                                                                            |
|            |                                     |                                                     |                                             |                                                                                            |
|            | tputs                               | Padds info to the str and outputs it                |                                             |                                                                                            |
|            |                                     |                                                     |                                             |                                                                                            |
|------------+-------------------------------------+-----------------------------------------------------+---------------------------------------------+--------------------------------------------------------------------------------------------|

** PATH
locations of executable bin
** CMD
*** ECHO

|---------------+------------------------------------------|
| *CMD*         | echo                                     |
|---------------+------------------------------------------|
| *DESCRIPTION* | Display a line of text                   |
|---------------+------------------------------------------|
| *OPTIONS*     | -n (do not output the trailing new line) |
|---------------+------------------------------------------|
| env var       |                                          |
| $?            |                                          |
| > < >>        |                                          |
| pipe          |                                          |
|---------------+------------------------------------------|

*** CD

|---------------+-------------------------------------------------------|
| *CMD*         | cd                                                    |
|---------------+-------------------------------------------------------|
| *DESCRIPTION* | Changing the working directory (abs or relative PATH) |
|---------------+-------------------------------------------------------|
| *OPTIONS*     | None                                                  |
|---------------+-------------------------------------------------------|
| env var       |                                                       |
| $?            |                                                       |
| > < >>        |                                                       |
| pipe          |                                                       |
|---------------+-------------------------------------------------------|

*** PWD

|---------------+---------------------------------|
| *CMD*         | pwd                             |
|---------------+---------------------------------|
| *DESCRIPTION* | Print name of current directory |
|---------------+---------------------------------|
| *OPTIONS*     | None                            |
|---------------+---------------------------------|
| env var       |                                 |
| $?            |                                 |
| > < >>        |                                 |
| pipe          |                                 |
|---------------+---------------------------------|

*** EXPORT

|---------------+----------------------------------------|
| *CMD*         | export                                 |
|---------------+----------------------------------------|
| *DESCRIPTION* | Set the export attribute for variables |
|---------------+----------------------------------------|
| *OPTIONS*     | None                                   |
|---------------+----------------------------------------|
| env var       |                                        |
| $?            |                                        |
| > < >>        |                                        |
| pipe          |                                        |
|---------------+----------------------------------------|

*** UNSET

|---------------+-----------------------------------------------------------|
| *CMD*         | unset                                                     |
|---------------+-----------------------------------------------------------|
| *DESCRIPTION* | UnSet the value and attribute for variables and functions |
|---------------+-----------------------------------------------------------|
| *OPTIONS*     | None                                                      |
|---------------+-----------------------------------------------------------|
| env var       |                                                           |
| $?            |                                                           |
| > < >>        |                                                           |
| pipe          |                                                           |
|---------------+-----------------------------------------------------------|

*** ENV

|---------------+-----------------------------------------|
| *CMD*         | env                                     |
|---------------+-----------------------------------------|
| *DESCRIPTION* | run a program in a modified environment |
|---------------+-----------------------------------------|
| *OPTIONS*     | None                                    |
|---------------+-----------------------------------------|
| env var       |                                         |
| $?            |                                         |
| > < >>        |                                         |
| pipe          |                                         |
|---------------+-----------------------------------------|

*** EXIT

|---------------+-------------------------|
| *CMD*         | exit                    |
|---------------+-------------------------|
| *DESCRIPTION* | Cause the shell to exit |
|---------------+-------------------------|
| *OPTIONS*     | None                    |
|---------------+-------------------------|
| env var       |                         |
| $?            |                         |
| > < >>        |                         |
| pipe          |                         |
|---------------+-------------------------|

** SIGNALS

|--------+-------------------------------+---------------+----------------+-----|
|        | *NAME*                        | *DESCRIPTION* | caret notation | Dec |
|--------+-------------------------------+---------------+----------------+-----|
| CTRL-C | End-of-Text character (*ETX*) |               | ^C             |  03 |
| CTRL-D | End-of-Transmission (*EOT*)   |               | ^D             |  04 |
| CTRL-\ | File Separator (*FS*)         |               | ^\             |  28 |
|--------+-------------------------------+---------------+----------------+-----|

** ANALYSIS
*** Lexer/Scanner (Lexical Analizer)
verify '' "" ; > < >> |
*** Parser (Syntax Analyzer)
first process env variables and sup syntax, after computing atomic cmd process operations between them.
*** Semantic Analyzer
resolves semantic information, check the 3 analysis nodes for errors
* USE && EXAMPLES
